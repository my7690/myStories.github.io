<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…ÙˆÙ‚Ø¹ Ø±ÙˆØ§ÙŠØ§ØªÙŠ</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600&display=swap" rel="stylesheet">

    <!-- Firebase CDN (App + Firestore ÙÙ‚Ø·) -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <style>
        /* Ø«ÙŠÙ… Ø£Ø²Ø±Ù‚ Ø¨Ø§Ø³ØªÙŠÙ„ Ù‡Ø§Ø¯ÙŠ */
        body, button, input, textarea, h1, h2, h3, h4, h5, h6, p, div, a, span {
    font-family: 'Tajawal', sans-serif !important;
}

        :root {
            --primary-color: #60a5fa;
            --secondary-color: #e0f2fe;
            --text-color: #1e293b;
            --card-bg: #ffffff;
            --shadow: 0 8px 25px rgba(37, 99, 235, 0.12);
            --gradient: linear-gradient(135deg, #bfdbfe 0%, #60a5fa 50%, #1d4ed8 100%);
        }

        /* Story Type Themes */
        .theme-romance {
            --primary-color: #e91e63;
            --secondary-color: #fce4ec;
            --text-color: #880e4f;
            --gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .theme-drama {
            --primary-color: #ff9800;
            --secondary-color: #fff3e0;
            --text-color: #e65100;
            --gradient: linear-gradient(135deg, #ffd89b 0%, #19547b 100%);
        }

        .theme-mystery {
            --primary-color: #673ab7;
            --secondary-color: #f3e5f5;
            --text-color: #4a148c;
            --gradient: linear-gradient(135deg, #868f96 0%, #596164 100%);
        }

        .theme-suspense {
            --primary-color: #795548;
            --secondary-color: #efebe9;
            --text-color: #3e2723;
            --gradient: linear-gradient(135deg, #29323c 0%, #485563 100%);
        }

        /* Navigation Bar */
        .navbar {
            background: var(--gradient);
            padding: 1rem 2rem;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-logo {
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            text-decoration: none;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            transition: all 0.3s ease;
        }

        .nav-links a:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .user-section {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: white;
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* Main Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Header Styles */
        .main-header {
            background: var(--gradient);
            color: white;
            padding: 3rem 2rem;
            text-align: center;
            border-radius: 20px;
            margin-bottom: 3rem;
            box-shadow: var(--shadow);
        }

        .main-header h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .theme-indicator {
            font-size: 1.1rem;
            opacity: 0.9;
            background: rgba(255, 255, 255, 0.2);
            padding: 10px 25px;
            border-radius: 25px;
            display: inline-block;
        }

        /* Story of the Day */
        .story-of-day {
            background: var(--gradient);
            color: white;
            padding: 2.5rem;
            border-radius: 20px;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s ease;
            position: relative;
        }

        .story-of-day:hover {
            transform: translateY(-5px);
        }

        .story-of-day h2 {
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        .daily-badge {
            background: rgba(255,255,255,0.2);
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 0.9rem;
            display: inline-block;
            margin-bottom: 1rem;
        }

        .reset-daily-btn {
            position: absolute;
            top: 15px;
            left: 15px;
            background: rgba(255, 255, 255, 0.3);
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s ease;
        }

        .reset-daily-btn:hover {
            background: rgba(255, 255, 255, 0.5);
            transform: scale(1.1);
        }

        /* Ideas Section */
        .ideas-section {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 2.5rem;
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
        }

        .ideas-section h2 {
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 2rem;
            font-size: 1.8rem;
        }

        .idea-form {
            background: var(--secondary-color);
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 2rem;
        }

        .idea-form .small-label {
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
            color: var(--text-color);
        }

        .name-input {
            width: 100%;
            padding: 0.8rem;
            border: 1.5px solid var(--primary-color);
            border-radius: 10px;
            margin-bottom: 1rem;
            background: var(--card-bg);
            color: var(--text-color);
            font-size: 0.95rem;
        }

        .idea-input, .discussion-input {
            width: 100%;
            padding: 1.2rem;
            border: 2px solid var(--primary-color);
            border-radius: 12px;
            margin-bottom: 1rem;
            resize: vertical;
            min-height: 100px;
            background: var(--card-bg);
            color: var(--text-color);
            font-size: 1rem;
        }

        .submit-idea-btn {
            background: var(--gradient);
            color: white;
            border: none;
            padding: 1rem 2.5rem;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }

        .submit-idea-btn:hover {
            transform: scale(1.05);
        }

        /* Stories Grid */
        .stories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 25px;
            margin-bottom: 3rem;
        }

        .story-card {
            background-color: var(--card-bg);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: all 0.4s ease;
            border: 3px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .story-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient);
        }

        .story-card:hover {
            transform: translateY(-10px);
            border-color: var(--primary-color);
        }

        .story-card h3 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }

        .story-card .category {
            background: var(--gradient);
            color: white;
            padding: 8px 18px;
            border-radius: 25px;
            font-size: 0.85rem;
            display: inline-block;
            margin-bottom: 1rem;
        }

        /* Cafe Section */
        .cafe-section {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 2.5rem;
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
        }

        .cafe-section h2 {
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 2rem;
            font-size: 1.8rem;
        }

        .discussion-form {
            background: var(--secondary-color);
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 2rem;
        }

        .discussions-list {
            max-height: 600px;
            overflow-y: auto;
        }

        .discussion-item {
            background: var(--secondary-color);
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 1rem;
            border-right: 4px solid var(--primary-color);
        }

        .discussion-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.8rem;
            font-size: 0.9rem;
            color: var(--text-color);
            opacity: 0.7;
        }

        .user-badge {
            background: var(--primary-color);
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
        }

        /* Like and Reply System */
        .discussion-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(0,0,0,0.1);
        }

        .like-btn, .reply-btn {
            background: none;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .like-btn {
            color: var(--text-color);
        }

        .like-btn:hover, .reply-btn:hover {
            background: rgba(0,0,0,0.1);
        }

        .reply-btn {
            color: var(--primary-color);
        }

        .replies-section {
            margin-top: 1rem;
            padding-right: 1rem;
            border-right: 2px solid var(--secondary-color);
        }

        .reply-item {
            background: var(--card-bg);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 0.5rem;
            border: 1px solid var(--secondary-color);
        }

        .reply-form {
            display: none;
            margin-top: 1rem;
        }

        .reply-input {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid var(--primary-color);
            border-radius: 8px;
            margin-bottom: 0.5rem;
            resize: vertical;
            min-height: 60px;
            background: var(--card-bg);
            color: var(--text-color);
        }

        .reply-name-input {
            width: 100%;
            padding: 0.6rem;
            border: 1px solid var(--primary-color);
            border-radius: 8px;
            margin-bottom: 0.5rem;
            background: var(--card-bg);
            color: var(--text-color);
            font-size: 0.9rem;
        }

        /* Hidden Class */
        .hidden {
            display: none;
        }

        /* Back Button */
        .back-button {
            background: var(--gradient);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 25px;
            cursor: pointer;
            margin-bottom: 2rem;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .back-button:hover {
            transform: translateX(-5px);
        }

        /* Story Reading */
        .story-reading {
            background-color: var(--card-bg);
            border-radius: 20px;
            padding: 3rem;
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
            line-height: 1.8;
            border: 2px solid var(--primary-color);
        }

        /* Questions name input */
        .answers-name-box {
            margin-bottom: 1.5rem;
            padding: 1rem;
            background: var(--secondary-color);
            border-radius: 12px;
        }

        .answers-name-box label {
            font-size: 0.95rem;
            color: var(--text-color);
            display: block;
            margin-bottom: 0.4rem;
        }

        .answers-name-box input {
            width: 100%;
            padding: 0.8rem;
            border-radius: 8px;
            border: 1.5px solid var(--primary-color);
            background: var(--card-bg);
        }
        
        /* --- Story Intro Page --- */
.story-intro-box {
    background: var(--card-bg);
    padding: 3rem 2rem;
    border-radius: 20px;
    box-shadow: var(--shadow);
    text-align: center;
    animation: fadeIn 0.6s ease;
}

.start-reading-btn {
    background: var(--gradient);
    color: white;
    padding: 0.9rem 2.5rem;
    font-size: 1.2rem;
    border-radius: 25px;
    cursor: pointer;
    border: none;
    margin-top: 2rem;
    transition: 0.3s;
}

.start-reading-btn:hover {
    transform: scale(1.05);
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to   { opacity: 1; transform: translateY(0); }
}

/* ====== Ù†Ø¸Ø§Ù… Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ ====== */

.story-reading {
    max-width: 750px;              /* Ø¹Ø±Ø¶ Ø§Ù„Ù†Øµ Ø§Ù„Ù…Ø«Ø§Ù„ÙŠ */
    margin: auto;
    padding: 3rem 2rem;
    background: var(--card-bg);
    line-height: 1.9;              /* ØªØ¨Ø§Ø¹Ø¯ Ù…Ø±ÙŠØ­ */
    font-size: 1.3rem;             /* Ø­Ø¬Ù… Ø®Ø· Ø£Ø³Ø§Ø³ÙŠ */
    font-family: 'Cairo', sans-serif; /* Ø®Ø· Ø¹Ø±Ø¨ÙŠ Ù…Ù…ØªØ§Ø² */
    color: var(--text-color);
    border-radius: 18px;
    box-shadow: var(--shadow);
    transition: all 0.3s ease;     /* Ø§Ù†ØªÙ‚Ø§Ù„ Ù†Ø§Ø¹Ù… */
}

/* Ù„Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ */
@media (max-width: 600px) {
    .story-reading {
        font-size: 1.05rem;
        padding: 2rem 1.2rem;
        line-height: 1.85;
    }
}

/* Ù„Ù„ØªØ§Ø¨Ù„Øª */
@media (min-width: 601px) and (max-width: 900px) {
    .story-reading {
        font-size: 1.15rem;
        padding: 2.5rem 1.8rem;
    }
}
.font-controls {
    display: flex;
    gap: 1rem;
    justify-content: center;
    margin-bottom: 1.5rem;
}

.font-controls button {
    background: var(--gradient);
    color: white;
    border: none;
    padding: 0.6rem 1.2rem;
    border-radius: 10px;
    cursor: pointer;
    font-size: 1rem;
    transition: 0.2s;
}

.font-controls button:hover {
    transform: scale(1.1);
}

/* ===== Pagination Buttons ===== */
.pagination-box {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 1rem;
    margin-top: 2rem;
}

.pagination-btn {
    background: var(--gradient);
    color: white;
    border: none;
    padding: 0.7rem 1.5rem;
    border-radius: 20px;
    cursor: pointer;
    font-size: 1rem;
    transition: 0.3s;
}

.pagination-btn:hover {
    transform: scale(1.05);
}

.page-number {
    padding: 0.5rem 1rem;
    border-radius: 15px;
    background: var(--secondary-color);
    color: var(--text-color);
    font-weight: bold;
    border: 1px solid var(--primary-color);
}
/* Ø¥Ø®ÙØ§Ø¡ Ø´Ø±ÙŠØ· Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ø¹Ø§Ø¯ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ù‡Ø§ØªÙ */
@media (max-width: 600px) {
    .pagination-box {
        display: none !important;
    }

    #mobilePaginationToggle {
        display: block !important;
    }
}

/* Ø²Ø± Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…ÙŠÙ†ÙŠÙˆ Ø¹Ù„Ù‰ Ø§Ù„Ù‡Ø§ØªÙ */
#mobilePaginationToggle {
    display: none;
    position: fixed;
    bottom: 20px;
    left: 20px;
    background: var(--gradient);
    color: white;
    padding: 0.9rem 1.1rem;
    border-radius: 50%;
    cursor: pointer;
    font-size: 1.4rem;
    z-index: 999;
    box-shadow: 0 4px 12px rgba(0,0,0,0.25);
}

/* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© */
#mobilePaginationMenu {
    display: none;
    position: fixed;
    bottom: 80px;
    left: 20px;
    background: var(--card-bg);
    padding: 1.2rem;
    border-radius: 15px;
    box-shadow: var(--shadow);
    z-index: 999;
    width: 180px;
    animation: fadeIn 0.25s ease-out;
}

#mobilePaginationMenu button {
    width: 100%;
    padding: 0.6rem;
    margin-bottom: 0.5rem;
    border-radius: 10px;
    border: none;
    background: var(--gradient);
    color: white;
    font-size: 1rem;
}

#mobilePaginationMenu .page-number-mobile {
    text-align: center;
    font-weight: bold;
    padding: 0.4rem;
    border-radius: 10px;
    background: var(--secondary-color);
    color: var(--text-color);
}

/* Ø²Ø± Ø§Ù„Ù‡Ø§Ù…Ø¨Ø±ØºØ± â€“ ÙŠØ¸Ù‡Ø± ÙÙ‚Ø· Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ */
.hamburger-menu {
    display: none;
    cursor: pointer;
    font-size: 2rem;
    color: white;
}

/* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø© ÙÙŠ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ */
.mobile-nav {
    display: none;
    position: fixed;
    top: 0;
    right: 0;
    width: 70%;
    height: 100%;
    background: var(--gradient);
    padding: 2rem;
    box-shadow: -5px 0 15px rgba(0,0,0,0.2);
    z-index: 2000;
}

.mobile-nav a {
    display: block;
    padding: 1rem;
    color: white;
    font-size: 1.3rem;
    text-decoration: none;
    margin-bottom: 1rem;
    background: rgba(255,255,255,0.15);
    border-radius: 10px;
    text-align: center;
}

.mobile-nav a:hover {
    background: rgba(255,255,255,0.25);
}

/* Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„: Ù†Ø®ÙÙŠ Ø´Ø±ÙŠØ· Ø§Ù„Ù†ÙÙŠØºÙŠØ´Ù† Ø§Ù„Ø£ØµÙ„ÙŠ Ùˆ Ù†Ø¸Ù‡Ø± Ø§Ù„Ù‡Ø§Ù…Ø¨Ø±ØºØ± */
@media (max-width: 800px) {
    .nav-links {
        display: none !important;
    }
    .hamburger-menu {
        display: block;
    }
}


    </style>
</head>
<body>
<!-- Navigation Bar -->
<nav class="navbar">
    <div class="nav-container">
        <a href="#home" class="nav-logo">ğŸ“š Ù…ÙƒØªØ¨Ø© Ø§Ù„Ù‚ØµØµ</a>

        <ul class="nav-links">
            <li><a href="#home">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
            <li><a href="#stories">Ù…ÙƒØªØ¨Ø© Ø§Ù„Ù‚ØµØµ</a></li>
            <li><a href="#cafe">Ù…Ù‚Ù‡Ù‰ Ø§Ù„Ø­ÙˆØ§Ø±</a></li>
        </ul>

        <!-- Ø²Ø± Ø§Ù„Ù‡Ø§Ù…Ø¨Ø±ØºØ± ÙŠØ¸Ù‡Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ -->
        <div class="hamburger-menu" onclick="toggleMobileNav()">â˜°</div>

        <div class="user-section" id="userSection">
            :) Ø¶ÙŠÙˆÙ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù„Ø§ ÙŠØ­ØªØ§Ø¬ÙˆÙ† ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„
        </div>
    </div>
</nav>

<!-- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø© ÙÙŠ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ -->
<div id="mobileNav" class="mobile-nav">
    <a href="#home" onclick="toggleMobileNav()">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
    <a href="#stories" onclick="toggleMobileNav()">Ù…ÙƒØªØ¨Ø© Ø§Ù„Ù‚ØµØµ</a>
    <a href="#cafe" onclick="toggleMobileNav()">Ù…Ù‚Ù‡Ù‰ Ø§Ù„Ø­ÙˆØ§Ø±</a>
</div>



    <!-- Home Page -->
    <div id="homePage" class="container">
        <header class="main-header">
            <h1>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ Ù…ÙƒØªØ¨Ø© Ø§Ù„Ù‚ØµØµ</h1>
            <div class="theme-indicator" id="themeIndicator"> ğŸ©µ</div>
        </header>

        <!-- Story of the Day -->
        <div class="story-of-day" id="storyOfDay" onclick="openDailyStory()">
            <button class="reset-daily-btn" onclick="resetDailyStory(event)">ğŸ”„ ØªØ¬Ø±Ø¨Ø© Ù‚ØµØ© Ø¬Ø¯ÙŠØ¯Ø©</button>
            <div class="daily-badge">Ù‚ØµØ© Ø§Ù„ÙŠÙˆÙ…</div>
            <h2 id="dailyStoryTitle">...</h2>
            <p id="dailyStoryDesc">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ù‚ØµØ© Ø§Ù„ÙŠÙˆÙ…...</p>
        </div>

        <!-- Ideas Section -->
        <section class="ideas-section">
            <h2>ğŸ’¡ ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª</h2>
            <div class="idea-form">
                <div class="small-label">Ø§Ø³Ù…Ùƒ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ):</div>
                <input type="text" id="ideaName" class="name-input" placeholder="Ù…Ø«Ø§Ù„: Ù‚Ø§Ø±Ø¦Ø© Ù…Ø¬Ù‡ÙˆÙ„Ø©ØŒ Ø²Ø§Ø¦Ø± Ù…Ù† ØªÙˆÙŠØªØ±...">
                <textarea class="idea-input" id="ideaInput" placeholder="Ù…Ø§ Ø§Ù„ÙÙƒØ±Ø© Ø§Ù„ØªÙŠ ØªÙˆØ¯ Ø£Ù† ØªØ±Ø§Ù‡Ø§ ÙÙŠ Ø§Ù„Ù‚ØµØ© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©ØŸ Ø§ÙƒØªØ¨ Ø§Ù‚ØªØ±Ø§Ø­Ùƒ Ù‡Ù†Ø§..."></textarea>
                <button class="submit-idea-btn" onclick="submitIdea()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙÙƒØ±Ø© âœ¨</button>
            </div>
            <div class="discussions-list" id="ideasList">
                <!-- Ideas will be displayed here -->
            </div>
        </section>
    </div>

    <!-- Stories Library Page -->
    <div id="storiesPage" class="container hidden">
      <!-- Last Read Story Section -->
<div id="lastReadSection" class="hidden" style="margin-bottom: 2rem;">
    <div id="lastReadBox" style="
        padding: 1.5rem;
        border-radius: 15px;
        box-shadow: var(--shadow);
        cursor: pointer;
        transition: 0.3s;
    " onclick="openLastRead()">
        <h3 style="margin-bottom: 0.5rem;">â­ Ø¢Ø®Ø± Ù…Ø§ Ù‚Ø±Ø£Øª</h3>
        <p id="lastReadTitle" style="font-size: 1.2rem; font-weight: bold;"></p>
        <p id="lastReadDesc" style="opacity: 0.8; margin-top: 0.3rem;"></p>
    </div>
</div>

        <button class="back-button" onclick="showHomePage()">â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
        <h1 style="text-align: center; color: var(--primary-color); margin-bottom: 3rem;">Ù…ÙƒØªØ¨Ø© Ø§Ù„Ù‚ØµØµ</h1>
        <div class="stories-grid" id="storiesGrid">
            <!-- All stories will be displayed here -->
        </div>
    </div>

    <!-- Cafe Page -->
    <div id="cafePage" class="container hidden">
        <button class="back-button" onclick="showHomePage()">â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
        <section class="cafe-section">
            <h2>â˜• Ù…Ù‚Ù‡Ù‰ Ø§Ù„Ø­ÙˆØ§Ø±</h2>
            <div class="discussion-form">
                <div class="small-label">Ø§Ø³Ù…Ùƒ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ):</div>
                <input type="text" id="discussionName" class="name-input" placeholder="Ù…Ø«Ø§Ù„: Ø´Ø®Øµ ØºØ±ÙŠØ¨ØŒ ØµØ¯ÙŠÙ‚Ø© Ø®Ø¬ÙˆÙ„Ø©...">
                <textarea class="discussion-input" id="discussionInput" placeholder="Ù…Ø§Ø°Ø§ ØªÙˆØ¯ Ø£Ù† ØªÙ†Ø§Ù‚Ø´ Ù…Ø¹ Ø²ÙˆØ§Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹ØŸ"></textarea>
                <button class="submit-idea-btn" onclick="submitDiscussion()">Ù†Ø´Ø± Ø§Ù„Ù†Ù‚Ø§Ø´ ğŸ’¬</button>
            </div>
            <div class="discussions-list" id="discussionsList">
                <!-- Discussions will be displayed here -->
            </div>
        </section>
    </div>
<!-- Story Intro Page -->
<section id="storyIntroPage" class="container hidden">
    <div class="story-intro-box">
        <h1 id="introTitle"></h1>
        <p id="introCategory" style="font-size:1.1rem; opacity:0.8;"></p>
        <p id="introDescription" style="margin-top:1rem;"></p>
        <button class="start-reading-btn" onclick="enterStory()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© ğŸ“–</button>
    </div>
</section>

    <!-- Story Reading Section -->
    <section id="storyReadingSection" class="container hidden">
        <button class="back-button" onclick="showStoriesPage()">â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…ÙƒØªØ¨Ø©</button>
            <div class="font-controls">
        <button onclick="changeFontSize('increase')">+</button>
        <button onclick="changeFontSize('decrease')">-</button>
        <button onclick="changeFontSize('reset')">ğŸ”„</button>
    </div>
        <div class="story-reading" id="storyContent">
            <!-- Story content will be loaded here -->
        </div>
        <button class="submit-idea-btn" onclick="showQuestions()" style="margin-top: 2rem;">Ø£ÙƒÙ…Ù„Øª Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© ğŸ’­</button>
        <!-- Ø²Ø± Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ -->
<div id="mobilePaginationToggle">â˜°</div>

<!-- Ù…Ù†ÙŠÙˆ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ -->
<div id="mobilePaginationMenu">
    <button onclick="previousPage()">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
    <button onclick="nextPage()">Ø§Ù„ØªØ§Ù„ÙŠ</button>
    <div class="page-number-mobile" id="mobilePageNumber"></div>
</div>

    </section>

    <!-- Questions Section -->
    <section id="questionsSection" class="container hidden">
        <button class="back-button" onclick="showStoryReading(currentStoryId)">â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚ØµØ©</button>
        <div class="ideas-section">
            <h2>ğŸ’­ ÙÙƒØ± ÙÙŠÙ‡Ø§...</h2>
            <div class="answers-name-box">
                <label for="answersName">Ø§Ø³Ù…Ùƒ ÙÙŠ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ):</label>
                <input type="text" id="answersName" placeholder="Ø§ÙƒØªØ¨Ù‡ Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© Ù„ÙƒÙ„ Ø§Ù„Ø£Ø¬ÙˆØ¨Ø©ØŒ Ø£Ùˆ Ø§ØªØ±ÙƒÙ‡ ÙØ§Ø±ØºØ§Ù‹ Ù„ÙŠØ¸Ù‡Ø± (Ù…Ø¬Ù‡ÙˆÙ„)">
            </div>
            <div id="questionsContainer">
                <!-- Questions will be loaded here -->
            </div>
            <div class="discussions-list" id="answersContainer">
                <!-- Answers will be displayed here -->
            </div>
        </div>
    </section>

    <script>
        // ========== Firebase Init ==========
        const firebaseConfig = {
            apiKey: "AIzaSyCTHtK0c0t9fSNmtukx8wSoZALrfnxmVhw",
            authDomain: "my-stories-site.firebaseapp.com",
            projectId: "my-stories-site",
            storageBucket: "my-stories-site.firebasestorage.app",
            messagingSenderId: "1027697190942",
            appId: "1:1027697190942:web:5798dc94e1358050caa60f",
            measurementId: "G-VE62Y5PRYJ"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const serverTimestamp = firebase.firestore.FieldValue.serverTimestamp;

// ========== Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù…Ø¹ Ø§Ù„Ø«ÙŠÙ…Ø§Øª ==========



        

// All Stories Data
const stories = [
    {
        id: 1,
        title: "Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø±ÙŠÙƒØ©",
        category: "Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ©",
        theme: "theme-romance",
        description: "Ù‚ØµØ© Ø­Ø¨ ØªØ±ÙˆÙ‰ Ø¹Ø¨Ø± Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø³Ø±ÙŠØ©",
        content: `
        ØªÙ†Ù‡Ø¯Øª ÙˆÙ‡ÙŠ Ø¬Ø§Ù„Ø³Ø© ÙˆØ­Ø¯Ù‡Ø§ Ø¹Ù„Ù‰ Ø³Ø±ÙŠØ±Ù‡Ù…Ø§ Ø²ÙˆØ¬Ù‡Ø§ Ø§Ù„Ø¹Ø²ÙŠØ² Ù„ÙŠØ³ Ù…Ø¹Ø§Ù‡Ø§ Ø§Ù„Ø§Ù† Ù‡Ùˆ ÙŠØ¹Ù…Ù„ Ø¹Ù…Ù„Ø§ Ø§Ø¶Ø§ÙÙŠØ§ ÙÙŠ Ù…ÙƒØªØ¨Ù‡ Ø§Ù„Ø°ÙŠ ÙÙŠ Ù…Ù†Ø²Ù„Ù‡Ù… Ø¬Ø§Ù‡Ø¯Øª Ù†ÙØ³Ù‡Ø§ ÙƒØ«ÙŠØ±Ø§ Ø­ØªÙ‰ Ù„Ø§ ØªØ°Ù‡Ø¨ Ø§Ù„ÙŠÙ‡ ÙˆØªØªÙÙ‚Ø¯Ù‡ ÙÙ‡ÙŠ ØªØ®Ø´Ù‰ Ø§Ù† ÙŠÙÙ‚Ø¯ ØªØ±ÙƒÙŠØ²Ù‡ ÙˆÙ„Ø§ ÙŠÙ†Ø¬Ø² Ø¹Ù…Ù„Ù‡ ÙˆØ­ØªÙ‰ ØªØ­Ø§ÙˆÙ„ Ø§Ù† ØªÙ†Ø³Ù‰ Ù…Ø§ Ø¨Ø®Ù„Ø¯Ù‡Ø§ Ù…Ù† Ø§ÙÙƒØ§Ø± Ø®Ø·ÙŠØ±Ø© Ø¨Ø§Ù„Ø°Ù‡Ø§Ø¨ Ø§Ù„ÙŠÙ‡ ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ø«Ø§Ù†ÙŠØ© Ù‚Ø±Ø±Øª Ø§Ù† ØªØ¯Ø±Ø³ Ù…Ù† Ø§Ø¬Ù„ Ø§Ù…ØªØ­Ø§Ù†Ù‡Ø§ Ù‡ÙŠ Ù„Ù… ÙŠÙƒÙ† Ù„Ù‡Ø§ Ø§Ù„Ù†ÙŠØ© Ø§Ù† ØªÙØªØ­ Ø§Ù„ÙƒØªØ§Ø¨ Ù…Ù†Ø° Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø§ Ø§Ù†Ù‡Ø§ ØªØ­ØªØ§Ø¬ Ø§Ù† ØªÙ„Ù‡ÙŠ Ø§ÙÙƒØ§Ø±Ù‡Ø§ ÙˆÙ„Ø°Ø§ ÙØªØ­ØªÙ‡ ÙÙŠ Ø§Ù„Ù†Ù‡Ø§ÙŠØ© Ù„Ù… ØªÙƒÙ† Ø§ÙƒØ«Ø± Ù…Ù† Ø¹Ø´Ø±ÙŠÙ† Ø¯Ù‚ÙŠÙ‚Ø© Ù…Ù† Ø§Ù„ØªØ±ÙƒÙŠØ² Ø§Ù„ØªØ§Ù… Ø§Ù„Ø°ÙŠ Ø§Ø¬Ø¨Ø±Øª Ù†ÙØ³Ù‡Ø§ Ø¹Ù„ÙŠÙ‡ Ø­ØªÙ‰ Ø§Ø­Ø³Øª Ø¨Ù†Ø¸Ø±Ø§Øª ØªØ®ØªØ±Ù‚ ØºØ´Ø§Ø¡ Ù‚Ù„Ø¨Ù‡Ø§ Ø±ÙØ¹Øª Ø±Ø§Ø³Ù‡Ø§ Ø¨Ù‡Ø¯ÙˆØ¡ Ù„ØªØªØ£ÙƒØ¯ Ù…Ù† ØµØ§Ø­Ø¨Ù‡Ø§ ÙØ§Ø°Ø§ Ø¨Ù‡ Ø²ÙˆØ¬Ù‡Ø§ Ø§Ù„Ø°ÙŠ Ø§Ø´ØªØ§Ù‚Øª Ø§Ù„ÙŠÙ‡ ÙŠÙ†Ø¸Ø± Ø§Ù„ÙŠÙ‡Ø§ Ø¨ÙŠÙ†Ù…Ø§ Ù‡Ùˆ Ù…ØªÙƒØ¦ Ø¹Ù„Ù‰ Ø¹ØªØ¨Ø© Ø¨Ø§Ø¨ Ø§Ù„ØºØ±ÙØ© ÙƒØ§Ø¯Øª ØªÙ‚ÙØ² Ù…Ù† Ù…ÙƒØ§Ù†Ù‡Ø§ ÙØ±Ø­Ø© Ù„ÙˆØ¬ÙˆØ¯Ù‡ Ø§Ù„Ø§ Ø§Ù†Ù‡Ø§ Ø¶Ø¨Ø·Øª Ù†ÙØ³Ù‡Ø§ Ø¨ØµØ¹ÙˆØ¨Ø© Ø­ØªÙ‰ Ù„Ø§ ÙŠØµØ¨Ø­ Ù…Ø¸Ù‡Ø±Ù‡Ø§ Ø§Ø­Ù…Ù‚ Ø§Ù…Ø§Ù…Ù‡ ÙˆØ­ØªÙ‰ Ù„Ø§ ÙŠØ´Ø¹Ø± Ø¨Ø§Ù„Ø°Ù†Ø¨ Ù„ØªØ±ÙƒÙ‡Ø§ ÙˆØ­ÙŠØ¯Ø© Ø­Ø±ÙƒØª Ø§ØµØ§Ø¨Ø¹Ù‡Ø§ Ø¨Ù‡Ø¯ÙˆØ¡ Ù…ØµØ·Ù†Ø¹ ÙˆÙˆØ¶Ø¹Øª Ø´Ø¹Ø±Ù‡Ø§ Ø®Ù„Ù Ø§Ø°Ù†Ù‡Ø§ ÙˆÙ‡ÙŠ ØªØ³Ø§Ù„Ù‡ (Ù…Ø§ Ø§Ù„Ø§Ù…Ø± ÙŠØ§ Ø¹Ø²ÙŠØ²ÙŠØŸ Ù‡Ù„ ØªØ­ØªØ§Ø¬ Ø´ÙŠØ¦Ø§ Ù…Ø§ØŸ ÙˆØ¬Ø¨Ø© Ù…Ù†ØªØµÙ Ø§Ù„Ù„ÙŠÙ„ØŸ Ø¨Ø¹Ø¶ Ø§Ù„Ø­Ù„ÙˆÙŠØ§Øª ØŸ) Ø§Ø¨ØªØ³Ù… Ø¨Ù‡Ø¯ÙˆØ¡ ÙˆÙ‡Ùˆ ÙŠÙ†Ø¸Ø± Ø§Ù„Ù‰ Ø²ÙˆØ¬ØªÙ‡ Ø§Ù„ØªÙŠ ØªØ¸Ù† Ø§Ù†Ù‡Ø§ Ù†Ø¬Ø­Øª ÙÙŠ Ø§Ø®ÙØ§Ø¡ Ø­Ù…Ø§Ø³Ù‡Ø§ Ø«Ù… Ø§Ù‚ØªØ±Ø¨ Ù…Ù†Ù‡Ø§ ÙˆØ§Ù…Ø³Ùƒ Ø¨ÙŠØ¯Ù‡Ø§ Ø¨Ø®ÙØ© ÙˆÙ‡Ùˆ ÙŠÙ‚ÙˆÙ„ (ØªØ¹Ø§Ù„ÙŠ Ù…Ø¹ÙŠ) ÙÙˆØ¬Ø¦Øª Ø¨ØªØµØ±ÙÙ‡ Ù‡Ø°Ø§ Ù‡Ùˆ ÙÙŠ Ø§Ù„Ø¹Ø§Ø¯Ø© ÙŠÙØ³Ø± Ù†ÙØ³Ù‡ Ù‚Ø¨Ù„ Ø§Ù† ÙŠØ§Ø®Ø°Ù‡Ø§ Ù…Ø¹Ù‡ ÙˆÙ„ÙƒÙ†Ù‡Ø§ Ù„Ù… ØªÙƒØ±Ù‡ Ø§Ù†Ù‡ ÙŠØ§Ø®Ø°Ù‡Ø§ Ø¨ÙŠØ¯Ù‡Ø§ Ø§Ù„Ù‰ Ù…ÙƒØ§Ù† Ù…Ø§ ÙØªØ¨Ø¹ØªÙ‡ Ø¨Ø¯ÙˆÙ† Ø§Ù† ØªÙ‚ÙˆÙ„ Ø´ÙŠØ¦Ø§ ÙˆØµÙ„ÙˆØ§ Ø§Ù„Ù‰ ÙˆØ¬Ù‡ØªÙ‡Ù… Ø§Ù„Ø§ Ø§Ù†Ù‡ Ù„Ù… ÙŠØªØ±Ùƒ ÙŠØ¯Ù‡Ø§ Ø¨Ø¹Ø¯ ÙŠØ¨Ø¯Ùˆ Ø§Ù†Ù‡ Ù†Ø³ÙŠ Ø§Ù†Ù‡ ÙŠÙ…Ø³Ùƒ ÙŠØ¯Ù‡Ø§ ÙˆÙ‡ÙŠ ÙƒØ§Ù†Øª Ø§ÙÙƒØ§Ø±Ù‡Ø§ Ù…Ø­ÙˆØ·Ø© Ø­ÙˆÙ„ ÙŠØ¯Ù‡Ø§ Ø§Ù„ØªÙŠ ÙŠØ§Ø³Ø±Ù‡Ø§ Ø²ÙˆØ¬Ù‡Ø§ Ù‚Ø§Ù„ Ù„Ù‡Ø§ Ù…Ø®Ø±Ø¬Ø§ Ø§ÙŠØ§Ù‡Ø§ Ù…Ù† Ø§ÙÙƒØ±Ù‡Ø§ Ù‡Ø°Ù‡ (ØªØ¯Ø§!) Ø±ÙØ¹Øª Ø±Ø§Ø³Ù‡Ø§ Ù„ØªØ±Ù‰ Ø³Ø¨Ø¨ Ø­Ù…Ø§Ø³Ù‡ ÙƒØ§Ù† Ù‚Ø¯ Ø¬Ù‡Ø² Ù„Ù‡Ù… Ø¨Ø¹Ø¶ Ø§Ù„Ù…Ø±Ø·Ø¨Ø§Øª Ù…Ø¹ Ø§Ù„ÙƒØ«ÙŠØ± Ù…Ù† Ø§Ù„ÙØ´Ø§Ø± ÙˆØ§Ù„ÙÙˆØ§ÙƒÙ‡ Ù†Ø¸Ø±Øª Ù„Ù‡ ÙˆÙ‡ÙŠ ØªØ­Ø§ÙˆÙ„ Ø§Ù† ØªØ®Ø±Ø¬ Ù…Ø§ Ø¨Ø§ÙÙƒØ§Ø±Ù‡Ø§ Ù…Ù† ÙÙ…Ù‡ (Ø§Ù†Ù‡Ø§ Ù„ÙŠÙ„Ø© Ø§ÙÙ„Ø§Ù… ÙŠØ§ Ø¹Ø²ÙŠØ²ØªÙŠ! Ù„Ù‚Ø¯ Ø¬Ù‡Ø²Øª Ù‡Ø°Ø§ ÙƒÙŠ Ù†Ø³ØªÙ…ØªØ¹ Ù…Ø¹Ø§ Ø§Ù„Ù„ÙŠÙ„Ø©!) Ù„Ù… ØªØªØºÙŠØ± ØªØ¹Ø§Ø¨ÙŠØ± ÙˆØ¬Ù‡Ù‡Ø§ ÙƒØ«ÙŠØ±Ø§ Ø§Ø° Ø§Ù†Ù‡Ø§ ÙƒØ§Ù†Øª Ø¨Ø§Ù„ÙØ¹Ù„ ØªÙÙƒØ± ÙÙŠ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ ÙˆÙ„ÙƒÙ†Ù‡Ø§ Ø¨Ø¯Øª Ù‚Ù„Ù‚Ù‡ (ÙˆØ¹Ù…Ù„ÙƒØŸ) Ø®Ø´ÙŠØª Ø§Ù†Ù‡Ø§ Ø§Ø°Ø§ Ø§Ø³ØªÙ…ØªØ¹Øª Ù…Ø¹Ù‡ Ø§Ù„Ù„ÙŠÙ„Ø© Ù„Ù† ØªØ±Ø§Ù‡ ØºØ¯Ø§ ÙˆÙ‡Ø°Ø§ ÙŠØ²Ø¹Ø¬Ù‡Ø§ Ø¬Ø¯Ø§ Ù‡Ùˆ Ø¨Ø§Ù„ÙØ¹Ù„ ÙƒØ§Ù† Ø¨Ø¹ÙŠØ¯Ø§ Ø¹Ù„Ù‰ Ù†Ø¸Ø±Ù‡Ø§ ÙˆÙ‡Ùˆ ÙÙŠ Ø§Ù„Ù…Ù†Ø²Ù„ Ù„Ø¹Ø´Ø±ÙŠÙ† Ø¯Ù‚ÙŠÙ‚Ø© ÙˆÙ‡ÙŠ Ø§Ø­Ø³Øª Ø§Ù†Ù‡Ø§ Ø³ØªÙÙ‚Ø¯ Ù†ÙØ³Ù‡Ø§ Ù…Ù† ÙˆÙ„Ù‡Ù‡Ø§ Ø¹Ù„ÙŠÙ‡ Ø¶Ø­Ùƒ Ø²ÙˆØ¬Ù‡Ø§ Ø¹Ù„ÙŠÙ‡Ø§ ÙˆØªØ±ÙƒÙ‡Ø§ Ø­Ø§Ø¦Ø±Ø© (Ù‡Ù‡Ù‡Ù‡Ù‡Ù‡ Ù„Ù… ÙŠÙƒÙ† Ù„Ø¯ÙŠ Ø¹Ù…Ù„ Ù…Ù†Ø° Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ÙƒÙ†Øª ÙÙ‚Ø¯ Ø§Ø¬Ù‡Ø² Ù„ÙŠÙ„ØªÙ†Ø§ Ø§Ù„Ù…Ù…ØªØ¹Ø© Ù‡Ø°Ù‡!) Ø§Ø±Ø§Ø¯ Ø§Ù† ÙŠØºØ¶ÙŠÙ‡Ø§ Ø§ÙŠØ¶Ø§ ÙÙ…Ø³Ø­ Ø§Ø¨ØªØ³Ø§Ù…ØªÙ‡ ÙˆØ§Ø³ØªØ¨Ø¯Ù„Ù‡Ø§ Ø¨ØªØ¹Ø¨ÙŠØ± Ø­Ø²ÙŠÙ† (Ø§ÙˆÙ‡ Ù‡Ù„ ÙŠØ¹Ù‚Ù„ Ø§Ù†Ùƒ Ù…Ø´ØºÙˆÙ„Ø© Ø§Ù„Ù„ÙŠÙ„Ø©ØŸ) Ù‡Ùˆ ÙŠØ¹Ù„Ù… Ø§Ù†Ù‡Ø§ Ù„Ù… ØªÙƒÙ† ØªØ¯Ø±Ø³ Ø­Ù‚Ø§ Ù„Ø§Ù†Ù‡Ø§ ØªØ±ÙŠØ¯ ÙˆØ§Ù†Ù‡Ø§ Ø§Ø±Ø§Ø¯Øª Ø§Ù† ØªØ­Ø¬Ø¨ Ø§ÙÙƒØ§Ø±Ù‡Ø§ Ø¨ØºÙ…Ø³ Ù†ÙØ³Ù‡Ø§ Ø¨Ø§Ù„Ø¯Ø±Ø§Ø³Ø© Ù‡Ùˆ ÙŠØ¹Ø±ÙÙ‡Ø§ Ø¬ÙŠØ¯Ø§ ØªÙˆØªØ±Øª ÙˆØ§Ù…Ø³ÙƒØª ÙˆØ¬Ù†ØªÙŠÙ‡ ÙˆÙ‡ÙŠ ØªÙˆØ¬Ù‡ Ø¹ÙŠÙˆÙ†Ù‡ Ø§Ù„ÙŠÙ‡Ø§ (Ù…Ø§Ø°Ø§ØŸ! Ù„Ø§ Ù„Ø§ Ù„Ø³Øª Ù…Ø´ØºÙˆÙ„Ø© Ø§Ø·Ù„Ø§Ù‚Ø§!) Ø§Ù…Ø³Ùƒ Ø¨ÙŠØ¯ÙŠÙ‡Ø§ Ø§Ù„Ø¯Ø§ÙØ¦ØªÙŠÙ† ÙˆÙ‚Ø¨Ù„Ù‡Ù…Ø§ Ø¨Ø±ÙÙ‚ ÙˆÙ‡Ùˆ ÙŠÙ‚ÙˆÙ„ (Ø­Ù‚Ø§ØŸ) ÙƒØ§Ø¯Øª ØªÙÙ‚Ø¯ ÙˆØ¹ÙŠÙ‡Ø§ Ù…Ù† Ø§Ù„ØµØ¯Ù…Ø© (!!!!! Ù†Ø¹Ù… Ù†Ø¹Ù… !!!) Ø§Ø¨ØªØ³Ù… Ù…Ø±Ø© Ø§Ø®Ø±Ù‰ ÙˆÙ‚Ø§Ù„ (Ø¬ÙŠØ¯ Ø§Ø°Ø§!) Ø­Ø§ÙˆÙ„Øª Ø§Ù† ØªØºÙŠØ± Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ù„Ø§Ù† Ù‚Ù„Ø¨Ù‡Ø§ ÙŠÙƒØ§Ø¯ ÙŠØ®Ø±Ø¬ Ù…Ù† Ù…ÙƒØ§Ù†Ù‡ (Ø¨Ø§Ù„Ù€ Ø¨Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© ÙŠØ¨Ø¯Ùˆ Ø§Ù† Ù‡Ù†Ø§Ùƒ Ø§Ø±ÙŠÙƒØ© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø· Ø³Ø§Ø°Ù‡Ø¨ Ù„Ø§Ø­Ø¶Ø± ÙˆØ§Ø­Ø¯Ø© Ø§Ø®Ø±Ù‰) Ø§Ø¨ØªØ³Ù… Ø¨Ø®Ø¨Ø« ÙˆÙ‡Ùˆ ÙŠÙ‚ÙˆÙ„ (Ù„Ù…Ø§Ø°Ø§ØŸ) Ù„Ù… ØªÙÙ‡Ù… (ØŸ Ù„ÙƒÙŠ Ø§Ø¬Ù„Ù€) Ù„Ù… ÙŠÙ…Ù‡Ù„Ù‡Ø§ Ø­ØªÙ‰ ØªÙƒÙ…Ù„ Ø§Ù„Ø¬Ù…Ù„Ø© Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„ØªØ§Ù„ÙŠ Ø§Ù„Ø°ÙŠ Ø±Ø£ØªÙ‡ ÙƒØ§Ù† Ù‡ÙŠ ØªØ±ØªÙØ¹ Ø¹Ù† Ø§Ù„Ø§Ø±Ø¶ ÙˆØªØ³ØªÙ‚Ø± Ø¨ÙŠÙ† ÙŠØ¯ÙŠÙ‡ ÙˆÙ‡Ùˆ ÙŠÙ‚ÙˆÙ„ (Ù„Ù…Ø§Ø°Ø§ ØªØ­ØªØ§Ø¬ÙŠÙ† Ù…Ù‚Ø¹Ø¯Ø§ ÙˆØ­Ø¶Ù†ÙŠ Ù…ÙˆØ¬ÙˆØ¯ØŸ) ÙˆÙ…Ø´Ù‰ Ø¨Ù‡Ø§ Ø­ØªÙ‰ Ø¬Ù„Ø³ Ø¹Ù„Ù‰ Ø§Ù„ÙƒØ±Ø³ÙŠ ÙˆÙ‡Ùˆ ÙŠØ­Ù…Ù„Ù‡Ø§ Ø«Ù… Ø§Ø¨ØªØ³Ù… Ø§Ø¨ØªØ³Ø§Ù…Ø© ÙƒØ¨ÙŠØ±Ø© ÙˆÙ‡Ùˆ ÙŠÙ‚ÙˆÙ„ (Ø§ØªØ±ÙŠÙ†ØŸ Ù‡Ø°Ø§ Ø§ÙØ¶Ù„ Ù…Ù† Ø§Ø­Ø¶Ø§Ø± ÙƒØ±Ø³ÙŠ Ø§Ø®Ø±) Ø±Ø³Ù…ÙŠØ§ Ù‚Ø¶ÙŠ Ø¹Ù„ÙŠÙ‡Ø§ Ù…Ù† Ø§Ù„ØµØ¯Ù…Ø© Ù„Ù… ØªØ¬ÙÙ„ Ø­ØªÙ‰ ÙˆØ¶Ù„Øª ØªØ­Ø§ÙˆÙ„ Ø§Ù† ØªØ³ØªÙˆØ¹Ø¨ Ù…Ø§ Ù‚Ø§Ù… Ø¨Ù‡ ÙˆÙ‡Ùˆ Ø§Ù„Ø°ÙŠ Ø§Ø¹Ø¬Ø¨Ù‡ Ø°Ù„Ùƒ Ù‚Ø±Ø± Ø§Ù† Ù„Ø§ ÙŠÙ‚ÙˆÙ„ Ø´ÙŠØ¦Ø§ ÙˆØ§Ù† ÙŠÙƒÙ…Ù„ Ù…Ø§ Ø¨Ø¯Ø£Ù‡ Ø§Ù…Ø³Ùƒ Ø§Ù„Ø¨Ø·Ø§Ù†ÙŠØ© ÙˆØºØ·Ø§Ù‡Ø§ ÙƒØ§Ù†Øª ÙÙŠ ØªÙ„Ùƒ Ø§Ù„Ù„Ø­Ø¸Ø© Ø§Ù„ØªÙŠ Ø´Ø¹Ø± Ø¨Ø´ÙŠØ¡ ÙŠØ­ØªØ±Ù‚ Ù†Ø¸Ø± Ø§Ù„ÙŠÙ‡Ø§ ÙÙƒØ§Ù† ÙˆØ¬Ù‡Ù‡Ø§ Ù‚Ø¯ ØµØ¨Øº Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ø¨Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø§Ø­Ù…Ø± ÙˆÙÙ…Ù‡Ø§ Ù…ÙØªÙˆØ­Ø§ Ù‚Ù„ÙŠÙ„Ø§ Ø§Ø³ØªÙˆØ¹Ø¨Øª Ø§Ø®ÙŠØ±Ø§ Ù…Ø§ Ø¬Ø±Ù‰ (ØŸ!ØŸ!!!!!ØŸØŸØŸ!!!!ØŸØŸ! ) Ù†Ø¸Ø±Øª Ù„Ù‡ Ø«Ù… Ø§Ù„Ù‰ Ø§Ù„Ø¨Ø§Ø¨ Ø«Ù… Ø§Ù„Ù‰ Ø§Ù„Ø¨Ø·Ø§Ù†ÙŠØ© Ù„Ø¹Ø¯Ø© Ù…Ø±Ø§Øª Ø§Ø·Ù„Ù‚ Ù‡Ùˆ Ø¶Ø­ÙƒØ© ÙƒØ¨ÙŠØ±Ø© Ù…Ù† Ø§Ø±ØªØ¨Ø§ÙƒÙ‡Ø§ Ù‡Ø°Ø§ ÙÙ‡Ù…Øª Ø§Ø®ÙŠØ±Ø§ Ø§Ù† Ù‡Ø°Ø§ ÙƒØ§Ù† Ù…Ø³Ø¹Ø§Ù‡ Ù…Ù† Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ø­ØªÙ‰ ÙŠØºÙŠØ¶Ù‡Ø§ (Ù…Ø§ØŸ! Ù‡Ù„ ØªØ±ÙŠØ¯ Ù‚ØªÙ„ÙŠ Ø¨Ø³ÙƒØªØ© Ù‚Ù„Ø¨ÙŠØ© ØŸ! Ø§Ù†Øª ØªØ¹Ù„Ù… Ø§Ù†ÙŠ Ø¶Ø¹ÙŠÙØ© Ù„Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙˆØ§Ù‚Ù!) Ø§ÙˆÙ‚Ù Ø¶Ø­ÙƒØªÙ‡ Ø¨ØµØ¹ÙˆØ¨Ø© ÙˆÙ‡Ùˆ ÙŠØ±Ø¯ Ø¹Ù„ÙŠÙ‡Ø§ Ø¨ÙŠÙ†Ù…Ø§ ÙˆØ¶Ø¹ Ø¬Ø¨ÙŠÙ†Ù‡ Ø¹Ù„Ù‰ Ø¬Ø¨ÙŠÙ†Ù‡Ø§ Ø§Ù„Ø³Ø§Ø®Ù† (Ø§Ù†Øª ØªÙ‚ÙˆÙ„ÙŠÙ† Ø°Ù„Ùƒ ÙˆÙ„ÙƒÙ† Ù‚ÙˆÙ„ÙŠ Ø§Ù„Ø­Ù‚ÙŠÙ‚Ø© Ù„Ù‚Ø¯ Ø§Ø¹Ø¬Ø¨Ùƒ Ø°Ù„Ùƒ Ø§Ù„ÙŠØ³ ÙƒØ°Ù„ÙƒØŸ) Ù„Ù… ØªÙ‚Ù„ Ø­Ù…Ø±Ù‡ ÙˆØ¬Ù‡Ù‡Ø§ ÙˆÙ‡ÙŠ ØªØ±Ø¯ Ø¹Ù„ÙŠÙ‡ (â€¦â€¦. Ù‡Ø°Ø§ Ù„Ù…â€¦. ÙŠÙƒÙ† Ø³ÙŠØ¦Ø§) Ø§Ø¨ØªØ³Ù… Ù…Ø±Ø© Ø§Ø®Ø±Ù‰ Ø«Ù… Ø§Ø­Ø¶Ø± Ø§Ù„Ø¨Ø·ÙŠØ® ÙƒØ°Ù„Ùƒ Ø­ØªÙ‰ ÙŠØ³Ø§Ø¹Ø¯Ù‡Ø§ Ø¹Ù„Ù‰ Ø§Ù† ØªÙ‡Ø¯Ø£ Ù‚Ù„ÙŠÙ„Ø§ (ÙˆÙ‡Ø°Ø§ Ù‡Ùˆ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ÙˆØ§Ù„Ø§Ù† Ù„Ù†Ø§ÙƒÙ„ Ø¨Ø¹Ø¶ Ø§Ù„Ø¨Ø·ÙŠØ® Ø§Ù„Ø·Ø§Ø²Ø¬ ÙˆÙ†Ø­Ù† Ù†Ø´Ø§Ù‡Ø¯ Ù‡Ø°Ø§ Ø§Ù„ÙÙŠÙ„Ù… Ù„Ù‚Ø¯ Ø³Ù…Ø¹Øª Ø§Ù† Ø§Ù„Ù†Ù‡Ø§ÙŠØ© Ø³Ø¹ÙŠØ¯Ø© ÙˆÙ…Ø±ÙŠØ­Ø© Ù„Ù„ØºØ§ÙŠØ© ÙˆØ§Ù†Ø§ Ù…ØªØ­Ù…Ø³ Ù„Ù‡!) Ø£ÙˆÙ…Ø£Øª Ø¨Ø±Ø§Ø³Ù‡Ø§ Ù…ÙˆØ§ÙÙ‚Ø© ÙˆÙ…Ø¯Øª ÙŠØ¯Ù‡Ø§ Ù„ØªØ­Ø¶Ø± Ø§Ù„Ø¨Ø·ÙŠØ® Ø­ØªÙ‰ ØªØ·Ø¹Ù…Ù‡ Ø§Ù„Ø§ Ø§Ù†Ù‡ Ø³Ø¨Ù‚Ù‡Ø§ Ø§Ø¨ØªØ³Ù… Ø¨Ø®Ø¨Ø« ÙˆÙ‡Ùˆ ÙŠÙ…Ø³Ùƒ Ø­Ø¨Ø© Ø§Ù„Ø¨Ø·ÙŠØ® Ø¨Ø§ØµØ§Ø¨Ø¹Ù‡ Ø«Ù… Ø§Ø´Ø§Ø± Ù„Ù‡Ø§ Ù„ØªÙØªØ­ ÙÙ…Ù‡Ø§ Ù‡Ùˆ ÙŠØ­Ø§ÙˆÙ„ Ø§Ù† ÙŠÙƒÙˆÙ† Ø§Ù„Ù…Ø³ÙŠØ·Ø± ØªÙ…Ø§Ù…Ø§ Ø§Ù„Ù„ÙŠÙ„Ø© ÙˆÙ‡Ø°Ø§ Ù„Ù… ÙŠØ¹Ø¬Ø¨Ù‡Ø§ ÙÙ„Ù… ØªÙØªØ­ ÙÙ…Ù‡Ø§ ÙØ§Ù‚ØªØ±Ø¨ Ù…Ù†Ù‡Ø§ Ù‚Ù„ÙŠÙ„Ø§ Ø«Ù… Ù‚Ø§Ù„ Ù…ØµØ·Ù†Ø¹Ø§ Ø§Ù„Ø­Ø²Ù† (Ù‡Ù„ Ù…Ù„Ù„Øª Ù…Ù†ÙŠØŸ Ù„Ø§Ø¨Ø¯ Ø§Ù†Ùƒ ØºØ§Ø¶Ø¨Ø© Ø§ÙŠØ¶Ø§ Ù‡Ø°Ø§ ØµØ­ÙŠØ­ Ù„Ù… Ø§ÙƒÙ† Ø§Ù„Ø²ÙˆØ¬ Ø§Ù„Ù…Ø«Ø§Ù„ÙŠ Ù„Ùƒ Ø§Ø¨Ø¯Ø§ Ø§Ù†Ø§ Ù„Ø§ Ø§Ø³ØªØ­Ù‚ Ø§Ù…Ø±Ø£Ø© Ù…Ø«Ù„Ùƒ ÙŠØ§ Ø¹Ø²ÙŠØ²ØªÙŠ ) ÙˆÙ‚Ø¹Øª ØªÙ…Ø§Ù…Ø§ Ù„Ù‡ ÙˆÙ†Ø¸Ø±Øª Ù„Ù‡ Ø¨ØªØ¹Ø§Ø·Ù Ø«Ù… Ù‚Ø§Ù„Øª (Ù„Ø§ Ù„Ø§ Ù„Ø§ Ù„Ù‚Ø¯ ÙƒÙ†Øª Ø§Ù…Ø²Ø­ Ø§Ø­Ø¨ Ø§Ù„Ø¨Ø·ÙŠØ®! Ø«Ù… ÙŠØ§ Ù‡Ø°Ø§ Ù„Ø§ ØªØªØ­Ø¯Ø« Ø¹Ù† Ø²ÙˆØ¬ÙŠ Ù‡ÙƒØ°Ø§ Ù…Ø±Ø© Ø§Ø®Ø±Ù‰ Ø§Ù†Ø§ Ø³Ø§Ø¬Ø¹Ù„Ùƒ ØªÙ†Ø¯Ù… Ø§Ø°Ø§ Ù…Ø§ Ø³Ù…Ø¹Øª Ù‡Ø°Ø§ Ø§Ù„ÙƒÙ„Ø§Ù… Ù…Ø±Ø© Ø§Ø®Ø±Ù‰ ) Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø­Ø²Ù† ÙÙŠ Ø«Ø§Ù†ÙŠØ© ÙˆØ§Ø¨ØªØ³Ù… Ù„Ù‡Ø§ (Ø§ØªÙ…Ù†Ù‰ Ø§Ù† Ø§Ø±Ø§Ùƒ ØªØ­Ø§ÙˆÙ„ÙŠÙ† ~) ÙØªØ­Øª ÙÙ…Ù‡Ø§ Ù„ÙŠØ·Ø¹Ù…Ù‡Ø§ Ø¯ÙˆÙ† Ø§Ù† ØªØ±Ø¯ ÙƒØ§Ù† Ù‚Ù„Ø¨Ù‡Ø§ Ø§Ù„Ø°ÙŠ ÙŠÙ†Ø¨Ø¶ Ø¨Ø¬Ù†ÙˆÙ† ÙƒØ§ÙÙŠØ§ ÙƒØ±Ø¯ Ù‡Ùˆ Ø­ØªÙ‰ Ø§Ø²Ø§Ù„ Ø¨Ø°ÙˆØ± Ø§Ù„Ø¨Ø·ÙŠØ® Ù…Ù† Ø§Ø¬Ù„Ù‡Ø§ ÙˆØ°Ù„Ùƒ Ù‚Ø¯ Ø­Ø±Ùƒ Ù‚Ù„Ø¨Ù‡Ø§ Ù„Ù‡ Ø§ÙƒØ«Ø± ÙˆØ¶Ø¹Øª Ø±Ø§Ø³Ù‡Ø§ Ø¹Ù„Ù‰ ØµØ¯Ø± Ø²ÙˆØ¬Ù‡Ø§ ÙˆÙ‚Ø¯ Ø§Ø±ØªØ§Ø­Øª Ù„Ù‡ ÙˆÙ„ÙˆØ¬ÙˆØ¯Ù‡ Ø«Ù… Ø¨Ø¹Ø¯ Ø±Ø¨Ø¹ Ø³Ø§Ø¹Ø© ÙÙ‚Ø· ÙƒØ§Ù†Øª Ù‚Ø¯ Ù†Ø§Ù…Øª Ø¨ÙŠÙ† Ø°Ø±Ø§Ø¹ÙŠÙ‡ Ø¨Ø¯Ù„Ø§ Ù…Ù† Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„ÙÙ„Ù… Ù…Ø¹Ù‡ Ù‡Ùˆ Ø§Ù„Ø°ÙŠ ÙƒØ§Ù†Øª Ù‡Ø°Ù‡ Ø®Ø·ØªÙ‡ Ù…Ù†Ø° Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ø§ÙƒÙ…Ù„ Ø§Ù„ÙÙŠÙ„Ù… Ø¨Ø³Ø¹Ø§Ø¯Ø© ÙˆÙ‡Ùˆ ÙŠØ³ØªÙ…ØªØ¹ Ø¨ÙˆØ¬ÙˆØ¯Ù‡Ø§ ÙÙŠ Ø§Ø­Ø¶Ø§Ù†Ù‡ ÙˆÙ‚Ø±Ø± Ø§Ù† ÙŠØºÙŠØ¶Ù‡Ø§ Ø¹Ù„Ù‰ Ù‡Ø°Ø§ ÙƒØ«ÙŠØ±Ø§ ÙÙŠ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„...
        `,
        questions: [
            "Ù…Ø§ Ø±Ø£ÙŠÙƒ ÙÙŠ Ø§Ù„Ø­Ø¨ Ø¹Ø¨Ø± Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ØŸ",
            "Ù‡Ù„ ØªØ¹ØªÙ‚Ø¯ Ø£Ù† Ø§Ù„Ø£Ø³Ø±Ø§Ø± ØªØ¬Ø¹Ù„ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© Ø£ÙƒØ«Ø± Ø¥Ø«Ø§Ø±Ø©ØŸ"
        ]
    },
    {
        id: 2,
        title: "Ø²Ù…ÙŠÙ„ÙŠ",
        category: "Ø¯Ø±Ø§Ù…Ø§",
        theme: "theme-drama",
        description: "Ø¹Ù„Ø§Ù‚Ø© Ù…Ø¹Ù‚Ø¯Ø© Ø¨ÙŠÙ† Ø²Ù…Ù„Ø§Ø¡ Ø§Ù„Ø¹Ù…Ù„",
        content: `
        Ø®Ù„Ù Ø£Ø¨ÙˆØ§Ø¨ Ø§Ù„Ù…ÙƒØ§ØªØ¨ Ø§Ù„Ù…ØºÙ„Ù‚Ø©ØŒ ØªÙˆØ¬Ø¯ Ù‚ØµØµ Ù„Ø§ ÙŠØ¹Ø±ÙÙ‡Ø§ Ø£Ø­Ø¯...
        `,
        questions: [
            "Ù‡Ù„ ÙŠÙ…ÙƒÙ† Ø£Ù† ØªØªØ­ÙˆÙ„ Ø¹Ù„Ø§Ù‚Ø© Ø§Ù„Ø¹Ù…Ù„ Ø¥Ù„Ù‰ Ø­Ø¨ØŸ",
            "Ù…Ø§ Ø­Ø¯ÙˆØ¯ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© Ø¨ÙŠÙ† Ø§Ù„Ø²Ù…Ù„Ø§Ø¡ ÙÙŠ Ø§Ù„Ø¹Ù…Ù„ØŸ"
        ]
    },
    {
        id: 3,
        title: "Ø²ÙˆØ¬ØªÙ‡",
        category: "ØºÙ…ÙˆØ¶",
        theme: "theme-mystery",
        description: "Ø£Ø³Ø±Ø§Ø± Ø®Ù„Ù Ø£Ø¨ÙˆØ§Ø¨ Ù…ØºÙ„Ù‚Ø©",
        content: `
        Ù„ÙŠØ³Øª ÙƒÙ„ Ø§Ù„Ø£Ø¨ÙˆØ§Ø¨ Ø§Ù„Ù…ØºÙ„Ù‚Ø© ØªØ­Ù…ÙŠ Ø£Ø³Ø±Ø§Ø±Ø§Ù‹ØŒ Ø¨Ø¹Ø¶Ù‡Ø§ ÙŠØ®Ø¨Ø¦ Ø¬Ø±Ø§Ø¦Ù…...
        `,
        questions: [
            "Ù…Ø§ Ø§Ù„Ø°ÙŠ ÙŠØ®ØªØ¨Ø¦ ÙˆØ±Ø§Ø¡ Ø§Ù„ÙˆØ¬ÙˆÙ‡ Ø§Ù„Ù‡Ø§Ø¯Ø¦Ø©ØŸ",
            "Ù‡Ù„ ØªØ¹ØªÙ‚Ø¯ Ø£Ù† Ø§Ù„Ø²ÙˆØ§Ø¬ Ù‚Ø¯ ÙŠÙƒÙˆÙ† Ø³Ø¬Ù†Ø§Ù‹ØŸ"
        ]
    },
    {
        id: 4,
        title: "Ø´ÙŠØ¡ Ù„ÙŠ",
        category: "Ø¯Ø±Ø§Ù…Ø§",
        theme: "theme-drama",
        description: "Ø±Ø­Ù„Ø© Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø°Ø§Øª",
        content: `
        Ø£Ø­ÙŠØ§Ù†Ø§Ù‹ ØªØ¶ÙŠØ¹ ÙÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø´ÙŠØ¡ Ù„Ø§ ØªØ¹Ø±Ù Ø£Ù†Ù‡ ÙƒØ§Ù† Ù…Ø¹Ùƒ Ø·ÙˆØ§Ù„ Ø§Ù„ÙˆÙ‚Øª...
        `,
        questions: [
            "Ù‡Ù„ ØªØ¹ØªÙ‚Ø¯ Ø£Ù† Ø§Ù„Ø¨Ø·Ù„Ø© ØªØºÙŠØ±Øª Ù„Ù„Ø£ÙØ¶Ù„ØŸ",
            "Ù…Ù† ØªØªØ¹Ø§Ø·Ù Ù…Ø¹Ù‡ Ø£ÙƒØ«Ø±: Ø§Ù„Ø¨Ø·Ù„Ø© Ø£Ù… Ø§Ù„ØµØ¯ÙŠÙ‚Ø©ØŸ"
        ]
    }
];

        let currentStoryId = null;

        function setTheme(themeClass, storyTitle = '') {
            document.body.className = themeClass || '';
            const themeNames = {
                'theme-romance': 'Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠ ğŸ’–',
                'theme-drama': 'Ø¯Ø±Ø§Ù…ÙŠ ğŸ­',
                'theme-mystery': 'ØºØ§Ù…Ø¶ ğŸ•µï¸',
                'theme-suspense': 'ØªØ´ÙˆÙŠÙ‚ÙŠ ğŸ”'
            };

            const indicator = document.getElementById('themeIndicator');
            if (storyTitle && themeClass && themeNames[themeClass]) {
                indicator.textContent = `Ø«ÙŠÙ… ${themeNames[themeClass]} - ${storyTitle}`;
            } else {
                indicator.textContent = 'ğŸ©µ';
            }
        }

        // ========== Ù‚ØµØ© Ø§Ù„ÙŠÙˆÙ… (Ù…Ø­Ù„ÙŠØ© Ù„ÙƒÙ„ Ø¬Ù‡Ø§Ø²) ==========
        function getDailyStory() {
            const today = new Date().toDateString();
            const saved = localStorage.getItem('daily_story');

            if (saved) {
                try {
                    const { date, storyId } = JSON.parse(saved);
                    if (date === today) {
                        const story = stories.find(s => s.id === storyId);
                        if (story) return story;
                    }
                } catch (e) {
                    console.error(e);
                }
            }

            const availableStories = stories.filter(s => s.id);
            if (!availableStories.length) return null;

            const randomStory = availableStories[Math.floor(Math.random() * availableStories.length)];
            localStorage.setItem('daily_story', JSON.stringify({
                date: today,
                storyId: randomStory.id,
                timestamp: Date.now()
            }));
            return randomStory;
        }

        function displayDailyStory() {
            const story = getDailyStory();
            const titleEl = document.getElementById('dailyStoryTitle');
            const descEl = document.getElementById('dailyStoryDesc');

            if (story) {
                titleEl.textContent = story.title;
                descEl.textContent = story.description;
            } else {
                titleEl.textContent = "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù‚ØµØ© Ø§Ù„ÙŠÙˆÙ…";
                descEl.textContent = "Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚ØµØµ...";
            }
        }

        function openDailyStory() {
            const story = getDailyStory();
            if (story) {
                showStoryReading(story.id);
            } else {
                alert("âš ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù‚ØµØ© Ù…ØªØ§Ø­Ø© Ø§Ù„ÙŠÙˆÙ…");
            }
        }

        function resetDailyStory(event) {
            event.stopPropagation();
            localStorage.removeItem('daily_story');
            displayDailyStory();
            alert('ğŸ”„ ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ù‚ØµØ© Ø§Ù„ÙŠÙˆÙ… - Ø¬Ø±Ø¨ÙŠ ØªØ¶ØºØ·ÙŠÙ† Ø¹Ù„Ù‰ Ù‚ØµØ© Ø§Ù„ÙŠÙˆÙ… Ù…Ø±Ø© Ø«Ø§Ù†ÙŠØ©!');
        }

        // ========== Ø£ÙÙƒØ§Ø± (ideas) ==========
        async function getIdeasFromDB() {
            const snapshot = await db.collection("ideas")
                .orderBy("createdAt", "desc")
                .get();

            return snapshot.docs.map(doc => {
                const data = doc.data();
                return {
                    id: doc.id,
                    text: data.text,
                    userName: data.userName || "Ù…Ø¬Ù‡ÙˆÙ„",
                    timestamp: data.createdAt
                        ? data.createdAt.toDate().toLocaleString('ar-SA')
                        : ''
                };
            });
        }

        async function saveIdeaToDB(text, userName) {
            await db.collection("ideas").add({
                text,
                userName,
                createdAt: serverTimestamp()
            });
        }

        async function displayIdeas() {
            const ideasList = document.getElementById('ideasList');
            try {
                const ideas = await getIdeasFromDB();
                if (!ideas.length) {
                    ideasList.innerHTML = '<p style="text-align: center; opacity: 0.6;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£ÙÙƒØ§Ø± Ø¨Ø¹Ø¯...</p>';
                    return;
                }
                ideasList.innerHTML = ideas.map(idea => `
                    <div class="discussion-item">
                        <div class="discussion-meta">
                            <span>â° ${idea.timestamp}</span>
                            <span class="user-badge">${idea.userName}</span>
                        </div>
                        <p>${idea.text}</p>
                    </div>
                `).join('');
            } catch (e) {
                console.error(e);
                ideasList.innerHTML = '<p style="text-align: center; opacity: 0.6;">Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£ÙÙƒØ§Ø±...</p>';
            }
        }

        async function submitIdea() {
            const ideaNameInput = document.getElementById('ideaName');
            const ideaInput = document.getElementById('ideaInput');

            const name = ideaNameInput.value.trim() || "Ù…Ø¬Ù‡ÙˆÙ„";
            const idea = ideaInput.value.trim();

            if (!idea) {
                alert('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© ÙÙƒØ±Ø© Ø£ÙˆÙ„Ø§Ù‹');
                return;
            }

            try {
                await saveIdeaToDB(idea, name);
                ideaInput.value = '';
                // Ù†Ø®Ù„ÙŠ Ø§Ù„Ø§Ø³Ù… ÙƒÙ…Ø§ Ù‡Ùˆ Ù„Ùˆ Ø­Ø§Ø¨Ø© ØªÙƒØ±Ø±
                await displayIdeas();
                alert('âœ¨ Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ! ØªÙ… Ø¥Ø±Ø³Ø§Ù„ ÙÙƒØ±ØªÙƒ Ø¨Ù†Ø¬Ø§Ø­');
            } catch (e) {
                console.error(e);
                alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø­ÙØ¸ Ø§Ù„ÙÙƒØ±Ø©.');
            }
        }

        // ========== Ø§Ù„Ù†Ù‚Ø§Ø´Ø§Øª (discussions) ==========
        async function getDiscussionsFromDB() {
            const snapshot = await db.collection("discussions")
                .orderBy("createdAt", "desc")
                .get();

            return snapshot.docs.map(doc => {
                const data = doc.data();
                const timestamp = data.createdAt
                    ? data.createdAt.toDate().toLocaleString('ar-SA')
                    : '';
                return {
                    id: doc.id,
                    text: data.text,
                    userName: data.userName || "Ù…Ø¬Ù‡ÙˆÙ„",
                    likeCount: typeof data.likeCount === "number" ? data.likeCount : 0,
                    replies: Array.isArray(data.replies) ? data.replies : [],
                    timestamp
                };
            });
        }

        async function saveDiscussionToDB(text, userName) {
            await db.collection("discussions").add({
                text,
                userName,
                likeCount: 0,
                replies: [],
                createdAt: serverTimestamp()
            });
        }

        async function displayDiscussions() {
            const discussionsList = document.getElementById('discussionsList');
            try {
                const discussions = await getDiscussionsFromDB();
                if (!discussions.length) {
                    discussionsList.innerHTML = '<p style="text-align: center; opacity: 0.6;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†Ù‚Ø§Ø´Ø§Øª Ø¨Ø¹Ø¯...</p>';
                    return;
                }

                discussionsList.innerHTML = discussions.map(discussion => `
                    <div class="discussion-item">
                        <div class="discussion-meta">
                            <span>â° ${discussion.timestamp}</span>
                            <span class="user-badge">${discussion.userName}</span>
                        </div>
                        <p>${discussion.text}</p>

                        <div class="discussion-actions">
                            <button class="like-btn" onclick="handleLike('${discussion.id}', ${discussion.likeCount})">
                                â¤ï¸ ${discussion.likeCount}
                            </button>
                            <button class="reply-btn" onclick="toggleReplyForm('${discussion.id}')">
                                ğŸ’¬ Ø±Ø¯
                            </button>
                        </div>

                        <div class="reply-form" id="replyForm-${discussion.id}">
                            <input class="reply-name-input" id="replyName-${discussion.id}" placeholder="Ø§Ø³Ù…Ùƒ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)">
                            <textarea class="reply-input" id="replyInput-${discussion.id}" placeholder="Ø§ÙƒØªØ¨ Ø±Ø¯Ùƒ..."></textarea>
                            <button class="submit-idea-btn" onclick="submitReply('${discussion.id}')" style="padding: 0.5rem 1rem; font-size: 0.9rem;">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø¯</button>
                        </div>

                        ${discussion.replies.length ? `
                        <div class="replies-section">
                            ${discussion.replies.map(reply => `
                                <div class="reply-item">
                                    <div class="discussion-meta">
                                        <span>â° ${reply.timestamp || ''}</span>
                                        <span class="user-badge">${reply.userName || 'Ù…Ø¬Ù‡ÙˆÙ„'}</span>
                                    </div>
                                    <p>${reply.text}</p>
                                </div>
                            `).join('')}
                        </div>` : ''}
                    </div>
                `).join('');
            } catch (e) {
                console.error(e);
                discussionsList.innerHTML = '<p style="text-align: center; opacity: 0.6;">Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ù‚Ø§Ø´Ø§Øª...</p>';
            }
        }

        async function submitDiscussion() {
            const discussionNameInput = document.getElementById('discussionName');
            const discussionInput = document.getElementById('discussionInput');

            const name = discussionNameInput.value.trim() || "Ù…Ø¬Ù‡ÙˆÙ„";
            const text = discussionInput.value.trim();

            if (!text) {
                alert('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© Ù†Ù‚Ø§Ø´ Ø£ÙˆÙ„Ø§Ù‹');
                return;
            }

            try {
                await saveDiscussionToDB(text, name);
                discussionInput.value = '';
                await displayDiscussions();
                alert('ğŸ’¬ ØªÙ… Ù†Ø´Ø± Ù†Ù‚Ø§Ø´Ùƒ Ø¨Ù†Ø¬Ø§Ø­');
            } catch (e) {
                console.error(e);
                alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ù†Ø´Ø± Ø§Ù„Ù†Ù‚Ø§Ø´.');
            }
        }

        function toggleReplyForm(discussionId) {
            const replyForm = document.getElementById(`replyForm-${discussionId}`);
            replyForm.style.display = replyForm.style.display === 'block' ? 'none' : 'block';
        }

        async function submitReply(discussionId) {
            const replyNameInput = document.getElementById(`replyName-${discussionId}`);
            const replyInput = document.getElementById(`replyInput-${discussionId}`);

            const name = replyNameInput.value.trim() || "Ù…Ø¬Ù‡ÙˆÙ„";
            const replyText = replyInput.value.trim();

            if (!replyText) {
                alert('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© Ø±Ø¯ Ø£ÙˆÙ„Ø§Ù‹');
                return;
            }

            try {
                const docRef = db.collection("discussions").doc(discussionId);
                const docSnap = await docRef.get();
                if (!docSnap.exists) return;

                const data = docSnap.data();
                const replies = Array.isArray(data.replies) ? data.replies : [];
                replies.unshift({
                    text: replyText,
                    userName: name,
                    timestamp: new Date().toLocaleString('ar-SA')
                });

                await docRef.update({ replies });
                replyInput.value = '';
                // Ù†Ø®Ù„ÙŠ Ø§Ù„Ø§Ø³Ù… ÙƒÙ…Ø§ Ù‡Ùˆ
                document.getElementById(`replyForm-${discussionId}`).style.display = 'none';
                await displayDiscussions();
            } catch (e) {
                console.error(e);
                alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø¯.');
            }
        }

        async function handleLike(discussionId, currentLikeCount) {
            try {
                const docRef = db.collection("discussions").doc(discussionId);
                await docRef.update({
                    likeCount: (currentLikeCount || 0) + 1
                });
                await displayDiscussions();
            } catch (e) {
                console.error(e);
                alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¬Ø§Ø¨.');
            }
        }

        // ========== Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© ÙˆØ§Ù„Ø£Ø³Ø¦Ù„Ø© + Firestore Ù„Ù„Ø£Ø¬ÙˆØ¨Ø© ==========
// ====== Ù†Ø¸Ø§Ù… Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ø¹Ù„Ù‰ ØµÙØ­Ø§Øª ======
let currentPages = [];
let currentPageIndex = 0;

function paginateContent(text, wordsPerPage = 150) {
    const words = text.trim().split(/\s+/);
    const pages = [];

    for (let i = 0; i < words.length; i += wordsPerPage) {
        pages.push(words.slice(i, i + wordsPerPage).join(" "));
    }

    return pages;
}

function renderPage() {
    const story = stories.find(s => s.id === currentStoryId);

    document.getElementById('storyContent').innerHTML = `
        <h2 style="color: var(--primary-color); text-align:center; margin-bottom:2rem;">
            ${story.title}
        </h2>
        <div style="
            background: var(--secondary-color);
            padding: 2rem;
            border-radius: 15px;
            line-height: 1.9;
            font-size: var(--reading-font-size);
        ">
            ${currentPages[currentPageIndex]}
        </div>

        <div class="pagination-box">
            <button class="pagination-btn" onclick="previousPage()">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
            <span class="page-number">${currentPageIndex + 1} / ${currentPages.length}</span>
            <button class="pagination-btn" onclick="nextPage()">Ø§Ù„ØªØ§Ù„ÙŠ</button>
        </div>
    `;

    // Ø­ÙØ¸ Ø¢Ø®Ø± ØµÙØ­Ø©
    localStorage.setItem(`story_${currentStoryId}_page`, currentPageIndex);
    updateMobilePageNumber();

}
        
        const toggleBtn = document.getElementById("mobilePaginationToggle");
const menu = document.getElementById("mobilePaginationMenu");

toggleBtn.addEventListener("click", () => {
    menu.style.display = 
        menu.style.display === "block" ? "none" : "block";
});

document.addEventListener("click", (e) => {
    if (
        !menu.contains(e.target) &&
        !toggleBtn.contains(e.target)
    ) {
        menu.style.display = "none";
    }
});

function showStoryReading(storyId, pushHash = true) {
    if (pushHash) window.location.hash = `story-${storyId}`;
    hideAllPages();
    document.getElementById('storyReadingSection').classList.remove('hidden');

    const story = stories.find(s => s.id === storyId);
    currentStoryId = storyId;

    setTheme(story.theme, story.title);

    // ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù„ØµÙØ­Ø§Øª
    currentPages = paginateContent(story.content, 150);

    // Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø¢Ø®Ø± ØµÙØ­Ø©
    const savedPage = localStorage.getItem(`story_${storyId}_page`);
    currentPageIndex = savedPage ? parseInt(savedPage) : 0;

    // Ø¹Ø±Ø¶ Ø§Ù„ØµÙØ­Ø©
    renderPage();
}

function nextPage() {
    if (currentPageIndex < currentPages.length - 1) {
        currentPageIndex++;
        renderPage();
    }
}

function previousPage() {
    if (currentPageIndex > 0) {
        currentPageIndex--;
        renderPage();
    }
}


        function showQuestions() {
            hideAllPages();
            document.getElementById('questionsSection').classList.remove('hidden');

            const story = stories.find(s => s.id === currentStoryId);
            if (!story) return;

            const questionsContainer = document.getElementById('questionsContainer');

            questionsContainer.innerHTML = story.questions.map((question, index) => `
                <div style="margin-bottom: 2rem; padding-bottom: 1rem; border-bottom: 2px solid var(--secondary-color);">
                    <h3 style="color: var(--text-color); margin-bottom: 1rem;">${question}</h3>
                    <textarea class="idea-input" id="answer${index}" placeholder="Ø§ÙƒØªØ¨ Ø¥Ø¬Ø§Ø¨ØªÙƒ Ù‡Ù†Ø§..."></textarea>
                </div>
            `).join('');

            questionsContainer.innerHTML += `
                <button class="submit-idea-btn" onclick="submitAnswers()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª</button>
            `;

            displayStoryAnswers();
        }

        async function displayStoryAnswers() {
            const answersContainer = document.getElementById('answersContainer');
            if (!currentStoryId) {
                answersContainer.innerHTML = '';
                return;
            }

            try {
                const snapshot = await db.collection("storyAnswers")
                    .where("storyId", "==", currentStoryId)
                    .orderBy("createdAt", "desc")
                    .get();

                if (snapshot.empty) {
                    answersContainer.innerHTML = '<p style="text-align: center; opacity: 0.6;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø¬ÙˆØ¨Ø© Ø¨Ø¹Ø¯...</p>';
                    return;
                }

                const answers = snapshot.docs.map(doc => {
                    const data = doc.data();
                    return {
                        text: data.text,
                        userName: data.userName || "Ù…Ø¬Ù‡ÙˆÙ„",
                        timestamp: data.createdAt
                            ? data.createdAt.toDate().toLocaleString('ar-SA')
                            : ''
                    };
                });

                answersContainer.innerHTML = answers.map(answer => `
                    <div class="discussion-item">
                        <div class="discussion-meta">
                            <span>â° ${answer.timestamp}</span>
                            <span class="user-badge">${answer.userName}</span>
                        </div>
                        <p>${answer.text}</p>
                    </div>
                `).join('');
            } catch (e) {
                console.error(e);
                answersContainer.innerHTML = '<p style="text-align: center; opacity: 0.6;">Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø¬ÙˆØ¨Ø©...</p>';
            }
        }

        async function submitAnswers() {
            if (!currentStoryId) {
                alert('Ù„Ø§ ØªÙˆØ¬Ø¯ Ù‚ØµØ© Ù…Ø­Ø¯Ø¯Ø©.');
                return;
            }

            const story = stories.find(s => s.id === currentStoryId);
            if (!story) return;

            const nameInput = document.getElementById('answersName');
            const userName = nameInput.value.trim() || "Ù…Ø¬Ù‡ÙˆÙ„";

            let hasNew = false;

            try {
                for (let i = 0; i < story.questions.length; i++) {
                    const answerInput = document.getElementById(`answer${i}`);
                    if (answerInput && answerInput.value.trim()) {
                        const text = answerInput.value.trim();
                        await db.collection("storyAnswers").add({
                            storyId: currentStoryId,
                            questionIndex: i,
                            text,
                            userName,
                            createdAt: serverTimestamp()
                        });
                        answerInput.value = '';
                        hasNew = true;
                    }
                }

                if (hasNew) {
                    await displayStoryAnswers();
                    alert('âœ… ØªÙ… Ø­ÙØ¸ Ø¥Ø¬Ø§Ø¨Ø§ØªÙƒ Ø¨Ù†Ø¬Ø§Ø­!');
                } else {
                    alert('âš ï¸ Ù„Ù… ØªÙ‚Ù… Ø¨ÙƒØªØ§Ø¨Ø© Ø£ÙŠ Ø¥Ø¬Ø§Ø¨Ø©.');
                }
            } catch (e) {
                console.error(e);
                alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø­ÙØ¸ Ø§Ù„Ø£Ø¬ÙˆØ¨Ø©.');
            }
        }
function displayAllStories() {
    const storiesGrid = document.getElementById('storiesGrid');
    if (!storiesGrid) return;

    storiesGrid.innerHTML = stories.map(story => `
        <div class="story-card" onclick="showStoryIntro(${story.id})">
            <span class="category">${story.category}</span>
            <h3>${story.title}</h3>
            <p>${story.description}</p>
        </div>
    `).join('');
}

// ========== Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„ØµÙØ­Ø§Øª Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù‡Ø§Ø´ (Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ø±ÙØ±ÙŠØ´) ==========

// Ø¯Ø§Ù„Ø© Ø¥Ø®ÙØ§Ø¡ ÙƒÙ„ Ø§Ù„ØµÙØ­Ø§Øª
function hideAllPages() {
    document.getElementById('homePage').classList.add('hidden');
    document.getElementById('storiesPage').classList.add('hidden');
    document.getElementById('cafePage').classList.add('hidden');
    document.getElementById('storyReadingSection').classList.add('hidden');
    document.getElementById('questionsSection').classList.add('hidden');
    document.getElementById('lastReadSection').classList.add('hidden');
     document.getElementById('storyIntroPage').classList.add('hidden');

}

// Ø¯ÙˆØ§Ù„ ØªÙ†Ù‚Ù„ ØªØ¶ÙŠÙ Ù‡Ø§Ø´ ÙˆØªØ¹Ø±Ø¶ Ø§Ù„ØµÙØ­Ø©
function showHomePage(pushHash = true) {
    if (pushHash) window.location.hash = "home";
    hideAllPages();
    document.getElementById('homePage').classList.remove('hidden');
    setTheme('', '');
    displayDailyStory();
    displayIdeas();
}

function showStoriesPage(pushHash = true) {
    if (pushHash) window.location.hash = "stories";
    hideAllPages();
    document.getElementById('storiesPage').classList.remove('hidden');
    setTheme('', '');
    displayAllStories();
    displayLastRead();
}

function showCafePage(pushHash = true) {
    if (pushHash) window.location.hash = "cafe";
    hideAllPages();
    document.getElementById('cafePage').classList.remove('hidden');
    setTheme('', '');
    displayDiscussions();
    

}


function showStoryReading(storyId, pushHash = true) {
    if (pushHash) window.location.hash = `story-${storyId}`;
    hideAllPages();
    document.getElementById('storyReadingSection').classList.remove('hidden');

    const story = stories.find(s => s.id === storyId);
    currentStoryId = storyId;
    localStorage.setItem("last_read_story", storyId);

    setTheme(story.theme, story.title);

    // ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù„ØµÙØ­Ø§Øª
    currentPages = paginateContent(story.content, 150);

    // Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø¢Ø®Ø± ØµÙØ­Ø©
    const savedPage = localStorage.getItem(`story_${storyId}_page`);
    currentPageIndex = savedPage ? parseInt(savedPage) : 0;

    // Ø¹Ø±Ø¶ Ø§Ù„ØµÙØ­Ø©
    renderPage();

    // ØªØ·Ø¨ÙŠÙ‚ Ø­Ø¬Ù… Ø§Ù„Ø®Ø· Ù„Ùˆ ØªÙ… ØªØºÙŠÙŠØ±Ù‡ Ø³Ø§Ø¨Ù‚Ø§Ù‹
    applyFontSize();
}



function showQuestions(pushHash = true) {
    if (pushHash) window.location.hash = `questions-${currentStoryId}`;
    hideAllPages();
    document.getElementById('questionsSection').classList.remove('hidden');

    const story = stories.find(s => s.id === currentStoryId);
    const questionsContainer = document.getElementById('questionsContainer');

    questionsContainer.innerHTML = story.questions.map((question, index) => `
        <div style="margin-bottom: 2rem; padding-bottom: 1rem; border-bottom: 2px solid var(--secondary-color);">
            <h3 style="color: var(--text-color); margin-bottom: 1rem;">${question}</h3>
            <textarea class="idea-input" id="answer${index}" placeholder="Ø§ÙƒØªØ¨ Ø¥Ø¬Ø§Ø¨ØªÙƒ Ù‡Ù†Ø§..."></textarea>
        </div>
    `).join('') + `
        <button class="submit-idea-btn" onclick="submitAnswers()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª</button>
    `;

    displayStoryAnswers();
}


// ========== Ù†Ø¸Ø§Ù… Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù‡Ø§Ø´ Ø¹Ù†Ø¯ Ø§Ù„Ø±ÙØ±ÙŠØ´ ==========
function handleHashNavigation() {
    const hash = window.location.hash.replace('#', '');

    if (hash === "" || hash === "home") {
        return showHomePage(false);
    }

    if (hash === "stories") {
        return showStoriesPage(false);
    }
    if (hash.startsWith("intro-")) {
    const id = parseInt(hash.split("-")[1]);
    return showStoryIntro(id, false);
}

    if (hash === "cafe") {
        return showCafePage(false);
    }

    if (hash.startsWith("story-")) {
        const id = parseInt(hash.split("-")[1]);
        return showStoryReading(id, false);
    }

    if (hash.startsWith("questions-")) {
        const id = parseInt(hash.split("-")[1]);
        currentStoryId = id;
        return showQuestions(false);
    }
}



// Ø´ØºÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…
window.addEventListener("hashchange", handleHashNavigation);
window.addEventListener("load", handleHashNavigation);

// ========== Ø§Ù„ØªÙ‡ÙŠØ¦Ø© ==========
function initialize() {
    handleHashNavigation();
}
function showStoryIntro(storyId, pushHash = true) {
    if (pushHash) window.location.hash = `intro-${storyId}`;

    hideAllPages();

    const story = stories.find(s => s.id === storyId);
    if (!story) return;

    currentStoryId = storyId;

    // Apply theme automatically
    setTheme(story.theme, story.title);

    // Fill intro data
    document.getElementById("introTitle").textContent = story.title;
    document.getElementById("introCategory").textContent = "Ø§Ù„Ù†ÙˆØ¹: " + story.category;
    document.getElementById("introDescription").textContent = story.description;

    document.getElementById("storyIntroPage").classList.remove("hidden");
}
function enterStory() {
    showStoryReading(currentStoryId);
}
function displayLastRead() {
    const box = document.getElementById("lastReadSection");
    const titleEl = document.getElementById("lastReadTitle");
    const descEl = document.getElementById("lastReadDesc");
    const lastBox = document.getElementById("lastReadBox");

    const lastId = localStorage.getItem("last_read_story");
    if (!lastId) {
        box.classList.add("hidden");
        return;
    }

    const story = stories.find(s => s.id == lastId);
    if (!story) {
        box.classList.add("hidden");
        return;
    }

    // show section
    box.classList.remove("hidden");

    // fill info
    titleEl.textContent = story.title;
    descEl.textContent = story.description;

    // apply theme colors
    lastBox.style.border = "2px solid var(--primary-color)";
    lastBox.style.background = "var(--secondary-color)";
}
function openLastRead() {
    const lastId = localStorage.getItem("last_read_story");
    if (lastId) showStoryIntro(parseInt(lastId));
}

// ====================== Ù†Ø¸Ø§Ù… ØªÙƒØ¨ÙŠØ± ÙˆØªØµØºÙŠØ± Ø§Ù„Ø®Ø· ======================
let currentFontSize = parseFloat(localStorage.getItem("fontSize")) || 1.1;

function applyFontSize() {
    const storyContent = document.getElementById("storyContent");
    if (storyContent) {
        storyContent.style.fontSize = currentFontSize + "rem";
    }
}

function changeFontSize(action) {
    if (action === "increase") {
        currentFontSize += 0.1;
    } 
    else if (action === "decrease") {
        currentFontSize = Math.max(0.8, currentFontSize - 0.1);
    } 
    else if (action === "reset") {
        currentFontSize = 1.1;
    }

    localStorage.setItem("fontSize", currentFontSize);
    applyFontSize();
}
function updateMobilePageNumber() {
    const el = document.getElementById("mobilePageNumber");
    if (!el) return;
    el.textContent = `${currentPageIndex + 1} / ${currentPages.length}`;
}
function toggleMobileNav() {
    const menu = document.getElementById("mobileNav");

    // Ø§ÙØªØ­ÙŠ ÙˆØ³ÙƒØ±ÙŠ Ø§Ù„Ù…ÙŠÙ†ÙŠÙˆ
    if (menu.style.display === "block") {
        menu.style.display = "none";
    } else {
        menu.style.display = "block";
    }
}

// Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø®Ø§Ø±Ø¬Ù‡Ø§
document.addEventListener("click", function(e) {
    const menu = document.getElementById("mobileNav");
    const burger = document.querySelector(".hamburger-menu");

    if (!menu || !burger) return;

    if (
        menu.style.display === "block" &&
        !menu.contains(e.target) &&
        !burger.contains(e.target)
    ) {
        menu.style.display = "none";
    }
});


// ÙƒÙ„ Ù…Ø±Ø© Ù†ÙØªØ­ ØµÙØ­Ø© Ù‚Ø±Ø§Ø¡Ø©ØŒ ÙŠØ·Ø¨Ù‚ Ø§Ù„Ø­Ø¬Ù… Ø§Ù„Ù…Ø®ØªØ§Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
document.addEventListener("DOMContentLoaded", applyFontSize);


initialize();

    </script>
</body>
</html>


